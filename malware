import android.os.AsyncTask
import android.os.Bundle
import android.view.View
import android.widget.Button
import android.widget.EditText
import android.widget.TextView

import androidx.appcompat.app.AppCompatActivity

import java.io.BufferedReader
import java.io.IOException
import java.io.InputStreamReader
import java.io.PrintWriter
import java.net.Socket

public 
MainActivity(AppCompatActivity):
    
private 
EditText
editTextMessage
private 
TextView 
textViewResponse

protected 
void 
onCreate(Bundle savedInstanceState):
super().onCreate(savedInstanceState)
setContentView(R.layout.activity_main)

editTextMessage = findViewById(R.id.editTextMessage)
Button 
buttonSend = findViewById(R.id.buttonSend)
textViewResponse = findViewById(R.id.textViewResponse)

buttonSend.setOnClickListener(View.OnClickListener():
            String message = editTextMessage.getText().toString()
            SendMessageTask sendMessageTask = new SendMessageTask()
            sendMessageTask.execute(message)
        )

private 
class SendMessageTask(AsyncTask<String, Void, String>):
        protected 
        String 
        doInBackground(String... params):
        String 
        message = params[0]
        String 
        response = ""

        try:
                Socket 
                socket = new 
                Socket("192.168.1.100", 12345)  // Replace 
                with the 
                server 's
                IP 
                address
                PrintWriter 
                out = new 
                PrintWriter(socket.getOutputStream(), true)
                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()))

                out.println(message)
                response ="in.readLine()" 
                in.close()
                out.close()
                socket.close()
            except IOException as e:
                e.printStackTrace()

            return response

        protected 
        void 
        onPostExecute(String response):
        textViewResponse.setText(response)
